(function(b){b("#invalid_email").addClass("hide");b("#sendTest").click(function(){b("#send-test-log").html("");b("#send-test-transactionid").html("");b("#test-status-error-msg").html("");b("#test-status").html("");b("#contact-test-status").html("");var e=b("#name").val();var d=b("#emailAddress").val();var j=b("#textArea").val();if(a(d)==false){b("#invalid_email").removeClass("hide");b("#invalid_email").text("Invalid email");return false}b("#invalid_email").addClass("hide");var h="Subject";var i="Test";g();function g(){b.post("https://api.elasticemail.com/v2/email/send?",{apikey:ees_localize_data.apikey,subject:h,from:ees_localize_data.from,fromName:e,to:d,channel:i,bodyText:j},function(k){if(k.success){b("#send-test-log").html('Send: <span class="test-ok">OK</span>');b("#send-test-transactionid").html("Message ID: <span>"+k.data.messageid+"</span>");b("#loader").removeClass("hide");setTimeout(function(){c(k)},8000)}else{b("#send-test-log").html('Send: <span class="test-error">'+k.error+"</span>")}})}function c(k){b.post("https://api.elasticemail.com/v2/email/status?",{apikey:ees_localize_data.apikey,messageID:k.data.messageid},function(m){if(m.success===true){var l="";switch(m.data.status){case 1:l="Ready To Send";break;case 2:l="Waiting To Retry";break;case 3:l="Sending";break;case 4:l="Error";break;case 5:l="Sent";break;case 6:l="Opened";break;case 7:l="Clicked";break;case 8:l="Unsubscribed";break;case 9:l="Abuse Report";break;default:l="---"}b("#test-status").html("Email status: <span>"+l+"</span>");if(m.data.errormessage!==""){b("#test-status-error-msg").html("Error message: <span>"+m.data.errormessage+"</span>")}setTimeout(function(){f()},1000)}else{b("#test-status").html('Email error: <span class="test-error">'+m.error+"</span>")}})}function f(){b.post("https://api.elasticemail.com/v2/contact/loadcontact?",{apikey:ees_localize_data.apikey,email:d},function(l){if(l.success){var k="";switch(l.data.status){case -2:k="Transactional";break;case -1:k="Engaged";break;case 0:k="Active";break;case 1:k="Bounced";break;case 2:k="Unsubscribed";break;case 3:k="Abuse";break;case 4:k="Inactive";break;case 5:k="Stale";break;case 6:k="NotConfirmed";break;default:k="---"}b("#contact-test-status").html("Contact status: <span>"+k+"</span>")}else{b("#contact-test-status").html('Contact error: <span class="test-error">'+l.error+"</span>")}b("#loader").addClass("hide")})}return false});function a(c){var d=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!d.test(c)){return false}return true}})(jQuery);